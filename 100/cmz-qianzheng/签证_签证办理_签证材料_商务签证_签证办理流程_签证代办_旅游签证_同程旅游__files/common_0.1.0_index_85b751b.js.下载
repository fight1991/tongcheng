!function(){var e={},t=window;e.render=function(e){var t,n,r=e.key,o=e.tpl[r]||e.tpl,i=e.data[r]||e.data,a=$(e.context),s=e.callback;t=o(i),e.overwrite&&a.empty(),n=$(t).appendTo(a),s&&$.isFunction(s)&&s.call(n,e)},e.log=function(){t.Monitor?t.Monitor.log.apply(t.Monitor,arguments):t.console&&console.log.apply(console,arguments)},e.stat=function(){t.Monitor?t.Monitor.stat.apply(t.Monitor,arguments):t.console&&console.log.apply(console,arguments)},e.getData=e.ajax=function(e){var n,r=this,o=(+new Date,e.error||e.failure),i=e.success;i&&(delete e.success,e.success=function(t){i.call(r,t);var n=document.createElement("a");n.href=e.url}),o&&delete e.error,e.error=function(e,t,i){o&&o(e,t,i),r.log((n||"")+":"+e.status+":"+i,"ajax")};var a={dataType:"jsonp"},s=$.extend({},a,e),u=(s.dataType,"");return n=s.url,u=t.host||"",location.host.indexOf("www.ly.com")>-1&&u.indexOf(".t.")>-1&&alert("警告:当前页面正在调用测试环境的接口"),u&&(s.url=n.replace(/^http:\/\/[^\/]+\//,u+"/").replace(/^\/([^\/]+)/,u+"/$1")),$.ajax(s)},e.resetAjax=function(){if($.ajax){var e=$.ajax;$.ajax=function(){var t=arguments;return"object"==typeof t[0]?t[0].url&&(t[0].url=t[0].url.replace("http:","")):"string"==typeof t[0]&&t[0]&&(t[0]=t[0].replace("http:","")),e.apply(this,t)}}},e.resetAjax(),e.fangZhuaUrl=function(e){return e},e.isSysSupportWebp=function(){var e=this;if(void 0!=e.sysWebp)return e.sysWebp;var t=navigator.userAgent;return/uc|chrome|android/i.test(t)?(e.sysWebp=!0,!0):(e.sysWebp=!1,e.sysWebp)},e.isImgSupportWebp=function(e){return e.indexOf("pic3.40017.cn")>-1||e.indexOf("pic4.40017.cn")>-1},e.setImageSize=function(e,n){var r=this;if(!e)return null;var o=e.indexOf("upload.17u.com")>-1,i=r.isSysSupportWebp()&&r.isImgSupportWebp(e),a=i?".webp":"";if(o)return e;n||(n="_600x300_00"),n&&-1===n.indexOf("_")&&(n="_"+n+"_00");var s=/_[0-9]{2,3}x[0-9]{2,3}_[0-9]{2}$/;return s.test(n)?e.replace(/(_[0-9]{2,3}x[0-9]{2,3}_[0-9]{2})?(\.\w+)(\.webp)?$/,function(e,t,r,o){return o&&(a=""),t?e.replace(t,n)+a:n+r+a}):(t.Monitor&&t.Monitor.log("图片的size设置有误","imgsize"),e+a)},e.getUser=function(){var e,t=this.cookie("us");if(t){var n=/userid=(\d+)/i.exec(t);n&&(e=/userid=(\d+)/i.exec(t)[1])}return e},e.getParamFromUrl=function(e,n){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r="[\\?&]"+e+"=([^&#]*)",o=new RegExp(r),i=t.location.href;n&&(i=i.toLowerCase());var a=o.exec(i);return null==a?null:a[1]},e.addStyle=function(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},e.setArrayDataUnique=function(e){for(var t={},n=0;n<e.length;n++)"undefined"==typeof t[e[n]]&&(t[e[n]]=1);e.length=0;for(var n in t)e[e.length]=n;return e},e.host=function(){return location.host.indexOf("www.ly.com")>-1?"":t.host||""},e.cookie=function(e,t,n){if("undefined"==typeof t){var r,o;return e&&(o=document.cookie.match(new RegExp("(?:^| )"+e+"(?:(?:=([^;]*))|;|$)")))&&(r=o[1]?decodeURIComponent(o[1]):""),r}n=n||{path:"/",domain:".ly.com"},null===t&&(t="",n.expires=-1);var i="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var a;"number"==typeof n.expires?(a=new Date,a.setTime(a.getTime()+24*n.expires*60*60*1e3)):a=n.expires,i="; expires="+a.toUTCString()}var s=n.path?"; path="+n.path:"",u=n.domain?"; domain="+n.domain:"",c=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),i,s,u,c].join("")},e.dateFormat=function(e,t){return e.format(t)},Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},e["export"]=function(e,t){if(!t)return void alert("导出方法有误,模块名称未定义");var n=e.name||t&&t.split("/")[0];"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define?define(t,function(){return e}):window[n+"Module"]=e},$.extend($,{cookie:e.cookie}),t.common=e,e["export"](e,"common/0.1.0/index")}();