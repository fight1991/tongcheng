!function(){function e(bf){function be(){if(!aU){var h=document.createElement("iframe");h.id="mNotice-backdrop",fish.one(a1).html("top",h),fish.one(h).css("position:absolute;border:none;filter:alpha(opacity=0);opacity:0;z-index:-1"),aU=h}var g=fish.one(a1).width(),i=fish.one(a1).height();fish.all(aU).css("width:"+g+"px;height:"+i+"px")}function bd(a){aW&&clearTimeout(aW),aW=setTimeout(function(){if(a2.ajaxObj){try{a2.ajaxObj.abort()}catch(h){}}var g=ao+"="+encodeURIComponent(ax.val());an&&"function"==typeof an&&(g=an()),a2.ajaxObj=fish.ajax({url:a,data:g,type:ai,cache:!0,jsonpCallback:ah,fn:function(i){aL(i);var k=aX?aX(i):i;if(a2.origin=ax.val(),k&&k.length){a9(ay),bc(k,ax.val()),am&&ax.show()}else{am&&ax.hide(),aq&&bc(),aq||a3(aV);var j=ax.val();j.length>ae&&(j=j.substring(0,ae)+"..."),0==bf.title&&aP.css("display:block;"),a9("对不起，找不到："+a6(j)),j=null}be()}}),aW=null},100)}function bc(w,v,u){w&&aY&&(w=aY.call(ax,w)||w),aA=w;for(var t=[],s=[],r=0,q=w.length;q>r;r++){var p=s.length;s[p]=w[r],(p==at-1||r==w.length-1)&&(t[t.length]=s,s=[])}if(aa=t,aQ=v,aO){aS.css("display:block"),aR.html("");for(var o=aa.length>aI?aI:aa.length,m=0;o>m;m++){var g=document.createElement("a");g.className="autofill_pLink",g.href="javascript:void(0);",g.onFocus="this.blur()",g.innerHTML=m+1,aR[0].appendChild(g)}}else{aS.css("display:none")}ba(aa,v,u)}function ba(j,i,q){if(q=q?q:0,aO&&aI){j.splice(aI,j.length);var p=fish.all(".autofill_pLink",aS);fish.all("a",aS).css("display:inline-Block"),p.removeClass("at"),1==j.length?aS.css("display:none"):0==q?fish.one(".the_first",aS).css("display:none"):q==j.length-1&&fish.one(".the_last",aS).css("display:none"),p[q].className="autofill_pLink at",aT=fish.one(p[q]).html(),aT--}var o,m,l;if(a3(aV),j[q]&&j[q].length){for(n=0;n<j[q].length;n++){j[q][n]&&(row=aV.insertRow(-1),cell=row.insertCell(-1),m=ac.call(row,j[q][n],n),row.className=aM,m&&(row.className+=" "+aG),o=af.call(row,j[q][n],n),o===!1?aV.deleteRow(-1):cell.innerHTML=(l=bh.call(row,j[q][n],n))?a6(o,i):o)}if(-1!==aV.index){for(var k=fish.all("."+aM,aV);k[aV.index]&&!fish.one(k[aV.index]).hasClass(aG);){aV.index++}k[aV.index]?fish.one(k[aV.index]).addClass(b):aV.index=-1}}}function a9(g){ax.setTitle(g)}function a8(B,A){var z,y,x,w,v,u,t,s,r,q,p=[],i=A;s=i.length;for(var t=0;s>t;t++){z=i[t],y=z.match,q=y.length,w=-1;for(var r=0;q>r;r++){x=y[r],ag&&(x=x.toLowerCase()),(v=x.indexOf(B))>-1&&(-1===w||w>v)&&(w=v,u=x)}w>-1&&(aw&&aw(z,u,w),p[p.length]=z)}return !p.length&&aq?(B=B.substr(0,B.length-1),""!==B&&(p=a8(B,i)),p.matchFalid=!0):(p.matchLength=B.length,p.length||aq||aS.css("display:none")),p}function a7(a,j){var i;ag&&(a=a.toLowerCase()),i=""===a?aB:a8(a,j),a2.origin=a;var h=a;a.length>ae&&(h=a.substring(0,ae)+"..."),i.length?(av&&i.sort(av),i.matchFalid?(0==bf.title&&aP.css("display:block;"),a9("对不起，找不到："+a6(h))):a9(aJ?a+"，"+ay:ay),bc(i,a.substr(0,i.matchLength),0)):(0==bf.title&&aP.css("display:block;"),a9("对不起，找不到："+a6(h)),aq||a3(aV)),be(),h=null}function a6(h,g){if(au&&""!==g){var j=g?g:ax.val();if(j=j.replace(/\\/g,"").replace(/\./g,"\\."),""==j){return h}var i=new RegExp(j,"g"+(ag?"i":""));return h.replace(/(>|^)([^>^<]+)(<|$)/g,function(k){return k.replace(i,function(l){return'<span class="'+aN+'">'+l+"</span>"})})}return h}function a5(v,u,t){if(!v||1!==v[0].nodeType||!u||1!==u[0].nodeType){throw new Error("需要指定输入域和/或及其弹框！")}var s,r=fish.one(window).width(),q=(fish.one(window).height(),u.width()),p=u.height(),o=v.width(),m=(v.height(),u.offset()),l=(fish.one(document).scrollTop(),fish.one(document).scrollLeft());if(t&&!d(t)){t.x="number"==typeof t.x?t.x:0,t.y="number"==typeof t.y?t.y:0}else{var t={x:0,y:0}}v.css((s=m.left-l)>r-(m.left-l)&&r-(m.left-l)<o?"left:"+(m.left+q-o-t.x)+"px":"left:"+(m.left+t.x)+"px"),v.css("top:"+(m.top+p+t.y+7)+"px")}function a4(h,g,l){var k=fish.all("."+aM,g),j=k.length-1,i=0;if(k.length){switch(k.removeClass(b),h){case 40:do{g.index++}while(k[g.index]&&!fish.one(k[g.index]).hasClass(aG));g.index>j?(g.index=-1,l.val(l.origin)):(fish.one(k[g.index]).addClass(b),i=g.index+at*aT,l.val(ad.call(k[g.index],aA[i],i)));break;case 38:do{g.index--}while(k[g.index]&&!fish.one(k[g.index]).hasClass(aG));i=g.index+at*aT,-1===g.index?l.val(l.origin):g.index<-1?(g.index=j,l.val(ad.call(k[g.index],aA[g.index],g.index)),fish.one(k[g.index]).addClass(b)):(fish.one(k[g.index]).addClass(b),l.val(ad.call(k[g.index],aA[i],i)))}}}function a3(h){h.index=ar;for(var g=fish.all("."+aM,h),i=g.length;i-->0;){h.deleteRow(-1)}}var a2,a1,a0,aZ,aY,aX,aV,aU,aS,aR,aP,aF=fish.guid(),aD='<div id="autoComplete-'+aF+'" class="autofill_wrap">{listarrow}<div class="show_title"><span class="autofill_hd_inner"></span><span class="autofill_close show_title"></span></div><table class="autofill_tray" cellpadding="0" cellspacing="0"></table><div class="autofill_page"><a class="the_first" href="javascript:void(0);">&lt;-</a><span class="autofill_pList"></span><a class="the_last" href="javascript:void(0);">-&gt;</a></div></div>',aC=[],aB=[],aA={},az={x:0,y:0},ay="输入中文/拼音/↑↓键选择",ax={},aw=null,av=null,au=!0,at=10,ar=0,aq=!1,ap="",ao="val",an=null,am=!1,al=!0,ak=!1,aj=null,ai="json",ag=!0,af=function(){},ad=function(){},ac=function(){return !0},aL=function(){},bh=function(){return !0},aE=!1,bg="",aM="autofill_item",aG="enableListRow",b="autofill_hover",aN="autofill_hili",aH="autofill_empty",c=!1,aO=!1,aI=0,aa=[],aQ="",aJ=!1,ae=10,aT=0,aK=!0,ah=!1;if(a2=this,!a2[0]){throw new Error("autoComplete init faild, fish obj was null when exec fish.all('...').autoComplete()")}al="isShowTopArrow" in bf?bf.isShowTopArrow:!0,ak="isFocusAjax" in bf?bf.isFocusAjax:!1,aj=bf.hideDom?bf.hideDom:null,aD=al?aD.replace("{listarrow}",'<span class="list_arrow"><i></i></span>'):aD.replace("{listarrow}",""),fish.one("body").html("top",aD),a1=fish.one("#autoComplete-"+aF),getComputedStyle=document.defaultView&&document.defaultView.getComputedStyle,"14px"===(a2[0].style.fontSize||(a2[0].currentStyle?a2[0].currentStyle.fontSize:getComputedStyle(a2[0],null).fontSize))&&a1.addClass("autofill_wrap_large"),a0=fish.one(".autofill_hd_inner",a1[0]),aP=fish.all(".show_title",a1[0]),aV=fish.dom(".autofill_tray",a1[0]),aS=fish.one(".autofill_page",a1[0]),aR=fish.one(".autofill_pList",aS),az.x=void 0!==bf.offsetX?bf.offsetX:0,az.y=void 0!==bf.offsetY?bf.offsetY:0,"function"==typeof bf.processAjaxDataFn&&(aX=bf.processAjaxDataFn),"function"==typeof bf.itemPrintFn&&(af=bf.itemPrintFn),"string"==typeof bf.template&&fish.trim(bf.template).length&&(aD=bf.template),"string"==typeof bf.title&&fish.trim(bf.title).length&&(ay=bf.title,a0.html(bf.title)),"string"==typeof bf.theme&&fish.trim(bf.theme).length&&(bg=bf.theme,a1.addClass(bf.theme)),"string"==typeof bf.itemClass&&fish.trim(bf.itemClass).length&&(aM=bf.itemClass),"string"==typeof bf.highlightClass&&fish.trim(bf.highlightClass).length&&(aN=bf.highlightClass),"string"==typeof bf.emptyClass&&fish.trim(bf.emptyClass).length&&(aH=bf.emptyClass),"function"==typeof bf.ajaxFn&&(aL=bf.ajaxFn),aZ=bf.width?bf.width:aZ,aY=bf.processPrintDataFn?bf.processPrintDataFn:aY,aw=bf.preSortFn?bf.preSortFn:aw,at=bf.max?bf.max:at,av=bf.sortFn?bf.sortFn:av,aq=bf.keepListOnNoResult?bf.keepListOnNoResult:aq,ap=bf.requestUrl?bf.requestUrl:ap,ai=bf.requestType?bf.requestType:ai,af=bf.itemPrintFn?bf.itemPrintFn:af,ac=bf.itemEnableFn?bf.itemEnableFn:ac,ad=bf.itemValueFn?bf.itemValueFn:ad,aC=bf.localData?bf.localData:aC,aB=bf.defaultData?bf.defaultData:aB,bh=bf.itemHighlightFn?bf.itemHighlightFn:bh,c=void 0!=bf.fillWhenHover?bf.fillWhenHover:c,aI=bf.maxPageNum?bf.maxPageNum:aI,aO=bf.pageShow?bf.pageShow:aO,aJ=bf.showUserInput?bf.showUserInput:aJ,aZ&&fish.all(aV).css("width:"+aZ+"px"),ae=bf.maxOverFlowNum?bf.maxOverFlowNum:ae,ao=bf.requestValName?bf.requestValName:ao,an=bf.paramDataFn?bf.paramDataFn:null,am="isNoDataHide" in bf?bf.isNoDataHide:am,ah=bf.jsonpCallback?bf.jsonpCallback:!1,a5(a1,a2,az),a1.css("display:none"),a1.effect({elem:a2,interShow:!1});var aW;return aS.on("click",function(h){var g=fish.getTarget(h);do{var i=g.className;if(i.indexOf("at")>-1){break}if(i.indexOf("autofill_pLink")>-1){ba(aa,aQ,parseInt(g.innerHTML,10)-1)}else{if(i.indexOf("the_first")>-1){ba(aa,aQ,parseInt(fish.dom(".at",aS).innerHTML,10)-2)}else{if(!(i.indexOf("the_last")>-1)){break}ba(aa,aQ,parseInt(fish.dom(".at",aS).innerHTML,10))}}}while(g=g.parentNode)}),a2.on("keyup",function(a){0==bf.title&&aP.css("display:none");var q,p,o=(fish.getTarget(a),f(a)),m=aV,l=a1.getCss("display");if(q=ax.val(),""===q||q===bf.placeholder&&!bf.ignorePlaceholder){if(ax.show(),0===aB.length){return void ax.hide()}a7(q,aB)}else{am||ax.show()}if(13===o&&"none"!==l){var j=fish.all("."+aM,m);bf.submit&&bf.submit(ax),aA[m.index]&&(a2.val(ad.call(j[m.index],aA[m.index+at*aT],m.index+at*aT)),bf.selectItemFn&&"function"==typeof bf.selectItemFn&&bf.selectItemFn(a2,j[m.index])),ax.hide()}else{40===o||38===o?a4(o,m,a2):13===o&&"none"===l?ax.hide():(p=ap,p?bd(p):a7(q,aC))}}),a2.on("click",function(){0!==aB.length&&ax.show()}),a1.on("mouseover",function(h){var g,k,j=fish.getTarget(h),i=aV;for(k=fish.all("."+aM,i);null!==j;){if(g=fish.one(j),g.hasClass(aM)){k.removeClass(b),k.each(function(l,m){return l===j&&fish.one(j).hasClass(aG)?(g.addClass(b),i.index=m,c&&a2.val(ad.call(k[i.index],aA[i.index+at*aT],i.index+at*aT)),!1):void 0});break}j=j.parentNode}}),a1.on("click",function(a){var j,i,h=fish.getTarget(a),g=aV;for(i=fish.all("."+aM,g),isHide=!0;null!==h;){if(j=fish.one(h),j.hasClass(aM)){i.each(function(k,l){return k===h?(fish.one(h).hasClass(aG)?(j.addClass(b),g.index=l,a2.val(ad.call(i[g.index],aA[g.index+at*aT],g.index+at*aT)),bf.selectItemFn&&"function"==typeof bf.selectItemFn&&bf.selectItemFn(a2,i[g.index])):isHide=!1,!1):void 0}),isHide&&ax.hide();break}h=h.parentNode}}),fish.one(".autofill_close",a1).on("click",function(){ax.hide()}),a2.on("mousedown",function(){aE=!0}),a2.on("mouseup",function(){aE=!1}),a1.on("mousedown",function(){aE=!0}),a1.on("mouseup",function(){aE=!1}),a2.on("focus",function(a){var i=fish.getTarget(a),h=fish.trim(i.value);if(h===bf.placeholder){i.value="",fish.one(i).removeClass(aH)}else{if(0==bf.title&&aP.css("display:none"),""===h||!ak){return}var g=ap;am||ax.show(),g?bd(g):a7(h,aC)}}),a2.on("blur",function(a){var g=fish.getTarget(a);fish.trim(g.value)&&fish.trim(g.value)!==bf.placeholder||(g.value=bf.placeholder,fish.one(g).addClass(aH)),setTimeout(function(){aE||(ax.hide(),aE=!1)},0)}),fish.one(window).on("resize",function(){ax.resetPosition()}),ax.macth=function(g){g?a7(ax.val(),g):a7(ax.val(),aC)},ax.hide=function(){a1.css("display:none")},ax.show=function(){"none"===a1.getCss("display")&&(null!==aj&&fish.one(aj).css("display: none"),a1.css("display:block;"),ax.resetPosition(),be()),aK===!0&&0!==aB.length&&(bc(aB,"",0),aK=!1)},ax.setTitle=function(g){a0.html(g)},ax.val=function(g){return void 0===g?fish.trim(a2.val(g)):void a2.val(g)},ax.resetPosition=function(){a5(a1,a2,az)},ax.requestUrl=function(g){"string"==typeof g&&(ap=g)},ax.localData=aC,ax.resetlocalData=function(g){aC=g},ax}function d(g){for(var c in g){return !1}return !0}function f(b){return b=fish.getEvent(b),b.which?b.which:b.keyCode}fish.extend({autoComplete:e})}();(function(){function c(g,f){if(!f){return !1}for(var h in g){f[h]!==undefined&&(g[h]=f[h])}return !0}function a(g){var f=this.length;while(f--){(new b(g,fish.one(this[f]))).execute()}}function d(f){if(!f.length){throw new Error("mTab 初始化失败")}}function b(e,f){this.cfg={tab:!1,tab_tray:!1,append:"crt",replace:!1,normal:!1,content:!1,none:"none",event:"click",rel:!1,init:!1,before:!1,fn:!1,openIndex:!1,cookieName:!1,aliveTime:!1,ajaxURL:!1,ajaxAttrName:!1,ajaxParamName:!1,ajaxOpenType:"get",ajaxFn:!1,realTime:!1},this.org=f;if(!c(this.cfg,e)){throw new Error("没有传递配置对象")}}b.prototype={constructor:b,last_tab:!1,cur_tab:!1,last_tray:!1,cur_tray:!1,execute:function(){function L(e){O[e]!==undefined&&(G.replace&&G.normal?(N.last_tab[0].className=G.normal,N.last_tab=fish.one(O[e]),N.last_tab[0].className=G.replace):(N.last_tab.removeClass(G.append),N.last_tab=fish.one(O[e]),N.last_tab.addClass(G.append)),C.length>1&&(N.last_tray.addClass(G.none),typeof G.rel=="string"?N.last_tray=fish.one(q(G.rel,N.last_tab[0].getAttribute(G.rel))):N.last_tray=fish.one(C[e]),N.last_tray.removeClass(G.none)),j(),G.fn&&G.fn.apply({org:N.org,cfg:N.cfg},[N.last_tab,N.last_tray]))}function k(g){var f=[],h=g.length;while(h--){g[h].nodeType===1&&f.unshift(g[h])}return f}function Q(h){var f=h.parentNode.children,i=k(f),g=i.length;if(g<2){return -1}while(g--){if(i[g]===h){return g}}}function q(h,f){for(var i=0,g=C.length;i<g;i++){if(C[i].getAttribute(h)===f){return C[i]}}}function A(v,E,l,g){var m=fish.getTarget(v),S=E.cfg,h=E.org,y=!1,w;do{if(m.parentNode===g){y=!0;break}m=m.parentNode||null}while(m);if(y&&m!==E.last_tab[0]){w=Q(m);if(w===-1){return}if(typeof S.before=="function"&&!S.before(m,E.last_tab,E.last_tray)){return}E.cur_tab=fish.one(m),S.replace&&S.normal?(E.last_tab[0].className=S.normal,E.cur_tab[0].className=S.replace):(E.last_tab.removeClass(S.append),E.cur_tab.addClass(S.append)),E.last_tabs=E.last_tab,E.last_tab=E.cur_tab,l.length>1&&(E.last_tray.addClass(S.none),typeof S.rel=="string"?E.cur_tray=fish.one(q(S.rel,m.getAttribute(S.rel))):E.cur_tray=fish.one(l[w]),E.cur_tray.removeClass(S.none),E.last_trays=E.last_tray,E.last_tray=E.cur_tray);if(typeof S.cookieName=="string"&&S.cookieName.length>0){var p={name:S.cookieName,value:w};typeof S.aliveTime=="object"&&fish.lang.extend(p,S.aliveTime),fish.cookie.set(p)}j(),S.fn&&S.fn.apply({org:E.org,cfg:E.cfg},[E.last_tab,E.last_tray,E.last_tabs,E.last_trays])}}function j(){if(typeof G.ajaxURL=="string"&&G.ajaxURL.length>0){var g=G.ajaxURL,m="",l;if(typeof G.ajaxAttrName=="string"){l=N.last_tab.attr(G.ajaxAttrName),l!==null&&l!==undefined&&(typeof G.ajaxParamName=="string"?m=G.ajaxParamName+"="+l:g+=l)}else{if(Object.prototype.toString.apply(G.ajaxAttrName)==="[object Array]"&&Object.prototype.toString.apply(G.ajaxParamName)==="[object Array]"&&G.ajaxAttrName.length===G.ajaxParamName.length){for(var f=0,h=G.ajaxAttrName.length;f<h;f++){l=N.last_tab.attr(G.ajaxAttrName[f]),l===null&&l===undefined&&(l=""),m+="&"+G.ajaxParamName[f]+"="+l}m=m===""?m:m.substring(1)}}var e=typeof G.ajaxFn=="function"?G.ajaxFn:function(o,i,p){p[0].innerHTML=o};N.last_tab.attr("data-ajax-has-requested")!=="true"&&fish.ajax({url:g,data:m,openType:G.ajaxOpenType==="post"?G.ajaxOpenType:"get",fn:function(i){e.apply({org:N.org,cfg:N.cfg},[i,N.last_tab,N.last_tray])}}),G.realTime!==!0&&N.last_tab.attr("data-ajax-has-requested","true")}}var N=this,B=0,D=[],J,C,G=N.cfg,z=N.org,R=G.event==="hover"?"mouseover":G.event,M,I,P,K,F,O;G.init&&G.init.apply({org:N.org,cfg:N.cfg}),G.tab_tray&&!G.tab?(J=fish.one(G.tab_tray,z),d(J),F=J[0],O=k(F.childNodes)):G.tab&&!G.tab_tray&&(J=fish.all(G.tab,z),d(J),F=J[0].parentNode,O=J),G.replace&&G.normal?N.last_tab=fish.one("."+G.replace,F):N.last_tab=fish.one("."+G.append,F),d(N.last_tab),G.content&&(C=fish.all(G.content,z),d(C),N.last_tray=fish.one(C[0]));var x;typeof G.openIndex=="number"&&(x=G.openIndex);if(G.cookieName){var H=fish.cookie.get(G.cookieName);H&&(x=parseInt(H))}typeof x=="number"&&L(x),J.on(R,function(e){A(e,N,C,F)})}},fish.extend({mTab:a})})();
