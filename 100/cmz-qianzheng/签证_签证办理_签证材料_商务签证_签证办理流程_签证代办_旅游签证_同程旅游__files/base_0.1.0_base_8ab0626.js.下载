!function(t){"undefined"!=typeof define&&define.amd?define([],function(){return t()}):"undefined"!=typeof define&&define.cmd?define("base/0.1.0/base",[],function(){return window.Base=t()}):(window.modules=window.modules||{},window.modules.Base=t())}(function(){function t(t){var i={};return $.each(t,function(t,n){$.isPlainObject(n)&&e(n,l)||(n={value:n}),i[t]=n}),i}function e(t,e){var i=!1;return $.each(e,function(e,n){return t.hasOwnProperty(n)?(i=!0,!1):void 0}),i}function i(t,e){for(var i=e?e.split("."):[],n=t,r=0,s=i.length;s>r;r++){if(void 0==n)return;n=n[i[r]]}return n}function n(t,e,i,n,s){var o,a,u=0,f=1===s?"once":"on";for(o=e.split(v);u<o.length;u++)a=this[o[u]],a&&$.isFunction(a)&&(a._isAspected||r.call(this,o[u]),this[f](o[u]+":"+t,i,n))}function r(t){var e,i=this[t];this[t]=function(){return this.trigger(t+":before")!==!1?(e=i.call(this,arguments),this.trigger(t+":after"),e):void 0},this[t]._isAspected=!0}function s(t){t.off();for(var e in t)t.hasOwnProperty(e)&&delete t[e];t.destroy=$.noop}function o(t){for(var e=[],i=t.constructor.prototype;!$.isEmptyObject(i);i=i.constructor.superclass)e.push(i);return e}var a,u=Class.extend({initialize:function(t,e,i){$.extend(this,{type:e,target:t,timeStamp:new Date-0},i)},isDefaultPrevented:!1,preventDefault:function(){this.isDefaultPrevented=!0}}),f=/\s+/,c={};c.on=function(t,e,i){var n=this._cache||(this._cache={});if(!e)return this;var r,s;for(s=t.split(f);r=s.shift();)(n[r]||(n[r]=[])).push({type:r,handler:e,context:i});return this},c.off=function(t,e){var i=this._cache||{};if(!t)return delete this._cache,this;var n,r,s;for(r=t.split(f);n=r.shift();)if(s=i[n]||[],e&&$.isFunction(e))for(var o=0;o<s.length;o++)s[o].handler===e&&s.splice(o,1);else delete i[n];return this},c.trigger=function(t){var e,i,n,r,s,o=this._cache||{},a=0;for(e=t.split(f);i=e.shift();)for(n=new u(this,i),r=o[i]||[];a<r.length;a++){var c=r[a],h=c.context||this,l=Array.prototype.slice.call(arguments,1);if(l.unshift(n),s=c.handler.apply(h,l),s===!1&&n.preventDefault(),n.isDefaultPrevented)break}return s},c.once=function(t,e,i){var n=this,r=e;return e=function(){r.call(this),n.off(t,e)},this.on(t,e,i),this},c.fire=c.trigger;var h={},l=["value","getter","setter","mergeOnInit"],d={};h.set=function(t,e,n){var r=this.ATTRS||(this.ATTRS={}),s=!0,o=this,a={};return"string"==typeof t?a[t]=e:(a=t,n=e),n=n||{},$.each(a,function(t,e){var a=t.split("."),u=a[0],f=a.length>1,c=r[u];if(!c)return void(s=!1);if(f){var h=i(c.value,a.slice(1,-1).join("."));if(void 0==h||!$.isPlainObject(h))return void(s=!1);var l=$.extend({},c.value);h=i(l,a.slice(1,-1).join(".")),h[a[a.length-1]]=e,e=l}return c.setter&&(e=c.setter.call(o,e,t,n.data),e==d)?void(s=!1):(n.overwrite||(e=$.extend(!0,{},c,{value:e}).value),c=c.value,r[u].value=e,void(n.silent||(o.trigger(u+":change",[o.get(u),c,t,n.data]),o.trigger("*:change",[o.get(u),c,t,n.data]))))}),s},h.get=function(t){var e=this,n=e.ATTRS,r={};if(t){var s=t.split(".");if(!n||!n.hasOwnProperty(s[0]))return;var o=n[s[0]],a=o.value;return o.getter&&(a=o.getter.call(e,a,t)),a=i(a,s.slice(1).join(".")),a==d?void 0:a}return $.each(n,function(t){r[t]=e.get(t)}),r},h.__initATTRS__=function(e){var i,n,r=this,s={},a=0;for(i=o(r),a=i.length-1;a>=0;a--)n=t(i[a].ATTRS||{}),$.each(n,function(t,e){s[t]=e.mergeOnInit?$.extend(!0,{},s[t],e):e});e=e||{},s=$.extend(!0,{},s,t(e)),r.ATTRS=s,$.each(e,function(t,e){s[t].setter&&r.set(t,e,{silent:!0})})};var v=/\s+/,p={};return p.before=function(t,e,i,r){1===i&&(i=void 0,r=1),n.call(this,"before",t,e,i,r)},p.after=function(t,e,i,r){1===i&&(i=void 0,r=1),n.call(this,"after",t,e,i,r)},a=Class.extend($.extend({initialize:function(t){this.__initATTRS__(t),this.__initMETHODS__(),this.__initEVENTS__(),this.__debug__()},destroy:function(){s(this)},__initEVENTS__:function(){function t(t,e){var n;switch(e){case 1:n=i.get("el")||document;break;case 2:n=document}for(var r in t){var s=t[r]||{};for(var o in s)!function(t,e){var s=""===r?$(n):$(r,n);s.on(e,function(){return i[t[e]].apply(i,arguments)})}(s,o)}}for(var e,i=this,n=o(i),r={},s={};e=n.pop();)$.extend(!0,r,e.EVENTS),$.extend(!0,s,e.DOCEVENTS);t(r,1),t(s,2)},__initMETHODS__:function(){for(var t,e=o(this);t=e.pop();)$.extend(this,t.METHODS)},__debug__:function(){var t=this;if(this._debug)for(var e in this)if(this.hasOwnProperty(e)&&"initialize"!==e&&"function"==typeof this[e]){var i=this[e];this[e]=function(e,i){return function(){var n,r,s,o;return n=new Date,s=e.apply(t,arguments),t._debug[i]=r=new Date-n,o=r>=100?"red":"green",console.log("%s cost %c %dms",i,"color:"+o,r),s}}(i,e)}}},h,c,p))}),function(){var t=!1,e=function(){};e.extend=function(e){function i(){if(!t&&this.initialize){if(/(\?|&)debug(&|$)/i.test(location.href)){var e,i,n,r=this.initialize;this._debug||(n=this._debug={}),this.initialize=function(){e=new Date,r.apply(this,arguments),i=n.initialize=new Date-e,console.log("%s cost %c%dms","#initialize","font-weight: bold",i)}}this.initialize.apply(this,arguments)}}var n=this.prototype;t=!0;var r=new this;t=!1;for(var s in e)r[s]=e[s];return i.superclass=n,i.prototype=r,i.prototype.constructor=i,i.extend=arguments.callee,i},this.Class=e}();